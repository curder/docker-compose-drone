import{_ as s,c as n,o as a,a as e}from"./app.c84ea946.js";const d=JSON.parse('{"title":"\u914D\u7F6E Drone","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u914D\u7F6Enginx\u4EE3\u7406","slug":"\u914D\u7F6Enginx\u4EE3\u7406"},{"level":2,"title":"\u914D\u7F6Esystemctl\u547D\u4EE4","slug":"\u914D\u7F6Esystemctl\u547D\u4EE4"}],"relativePath":"config/drone.md","lastUpdated":1656062392000}'),l={name:"config/drone.md"},p=e(`<h1 id="\u914D\u7F6E-drone" tabindex="-1">\u914D\u7F6E Drone <a class="header-anchor" href="#\u914D\u7F6E-drone" aria-hidden="true">#</a></h1><h2 id="\u914D\u7F6Enginx\u4EE3\u7406" tabindex="-1">\u914D\u7F6Enginx\u4EE3\u7406 <a class="header-anchor" href="#\u914D\u7F6Enginx\u4EE3\u7406" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">drone </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;"> 127.0.0.1:10080; </span><span style="color:#676E95;font-style:italic;"># \u8FD9\u91CC\u7684\u7AEF\u53E3\u9700\u8981\u8DDFdrone-server\u5BB9\u5668\u4E2D\u7684\u7AEF\u53E3\u6620\u5C04\u4FDD\u6301\u4E00\u81F4</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">ci.example.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">X-Forwarded-For </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">X-Forwarded-Proto </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">scheme</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">Host drone.example.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://drone</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_http_version </span><span style="color:#A6ACCD;">1.1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> proxy_buffering </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;"> chunked_transfer_encoding </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u914D\u7F6Esystemctl\u547D\u4EE4" tabindex="-1">\u914D\u7F6Esystemctl\u547D\u4EE4 <a class="header-anchor" href="#\u914D\u7F6Esystemctl\u547D\u4EE4" aria-hidden="true">#</a></h2><p>\u5C06\u9879\u76EE\u4E0B\u7684 <code>drone-ci.service</code> \u914D\u7F6E\u6587\u4EF6\u62F7\u8D1D\u5230 <code>/usr/lib/systemd/system/</code> \u76EE\u5F55\u4E0B\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">cp drone-ci.service /usr/lib/systemd/system/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">systemctl </span><span style="color:#82AAFF;">enable</span><span style="color:#A6ACCD;"> drone-ci.service </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> systemctl start drone-ci.service</span></span>
<span class="line"></span></code></pre></div><p>\u8FD9\u6837\u64CD\u4F5C\u540E\u7EED\u5C31\u53EF\u4EE5\u5F00\u673A\u81EA\u542F\u52A8\u4E86\u3002</p><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">systemctl status drone-ci.service  </span><span style="color:#676E95;font-style:italic;"># \u67E5\u770B\u670D\u52A1\u72B6\u6001</span></span>
<span class="line"></span></code></pre></div>`,8),o=[p];function c(r,t,y,D,i,A){return a(),n("div",null,o)}var F=s(l,[["render",c]]);export{d as __pageData,F as default};
