import{_ as s,c as a,o as n,d as e}from"./app.30a37c91.js";const A='{"title":"\u521D\u59CB\u5316CentOS","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u8BBE\u7F6E\u4E2A\u6027\u5316\u4E3B\u673A\u540D","slug":"\u8BBE\u7F6E\u4E2A\u6027\u5316\u4E3B\u673A\u540D"},{"level":2,"title":"\u66FF\u6362\u963F\u91CC\u955C\u50CF\u6E90","slug":"\u66FF\u6362\u963F\u91CC\u955C\u50CF\u6E90"},{"level":2,"title":"\u5347\u7EA7\u5E38\u7528\u5DE5\u5177","slug":"\u5347\u7EA7\u5E38\u7528\u5DE5\u5177"},{"level":2,"title":"\u4FEE\u6539\u65F6\u533A&&\u8BBE\u7F6E\u65F6\u95F4","slug":"\u4FEE\u6539\u65F6\u533A-\u8BBE\u7F6E\u65F6\u95F4"},{"level":2,"title":"\u5185\u6838\u4F18\u5316","slug":"\u5185\u6838\u4F18\u5316"},{"level":2,"title":"\u65B0\u589E\u7528\u6237","slug":"\u65B0\u589E\u7528\u6237"},{"level":2,"title":"\u7981\u6B62root\u7528\u6237\u767B\u5F55","slug":"\u7981\u6B62root\u7528\u6237\u767B\u5F55"},{"level":2,"title":"\u7EC8\u7AEF\u914D\u7F6E","slug":"\u7EC8\u7AEF\u914D\u7F6E"}],"relativePath":"install/centos-initialization.md"}',l={name:"install/centos-initialization.md"},p=e(`<h1 id="\u521D\u59CB\u5316centos" tabindex="-1">\u521D\u59CB\u5316CentOS <a class="header-anchor" href="#\u521D\u59CB\u5316centos" aria-hidden="true">#</a></h1><h2 id="\u8BBE\u7F6E\u4E2A\u6027\u5316\u4E3B\u673A\u540D" tabindex="-1">\u8BBE\u7F6E\u4E2A\u6027\u5316\u4E3B\u673A\u540D <a class="header-anchor" href="#\u8BBE\u7F6E\u4E2A\u6027\u5316\u4E3B\u673A\u540D" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo hostnamectl set-hostname drone-ci</span></span>
<span class="line"></span></code></pre></div><h2 id="\u66FF\u6362\u963F\u91CC\u955C\u50CF\u6E90" tabindex="-1">\u66FF\u6362\u963F\u91CC\u955C\u50CF\u6E90 <a class="header-anchor" href="#\u66FF\u6362\u963F\u91CC\u955C\u50CF\u6E90" aria-hidden="true">#</a></h2><blockquote><p><strong>\u6CE8\u610F\uFF1A</strong> \u5982\u679C\u670D\u52A1\u5668\u5728\u56FD\u5185\u5EFA\u8BAE\u4FEE\u6539yum\u6E90\u4E3Aaliyun\uFF0C\u5982\u679C\u670D\u52A1\u5668\u5728\u56FD\u5916\u53EF\u4EE5\u5FFD\u7565\u3002</p></blockquote><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo curl -o /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo yum makecache</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u66F4\u591A\u5176\u4ED6\u64CD\u4F5C\u7CFB\u7EDF\u955C\u50CF\u64CD\u4F5C<a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener noreferrer">\u67E5\u770B\u8FD9\u91CC</a>\u3002</p></blockquote><h2 id="\u5347\u7EA7\u5E38\u7528\u5DE5\u5177" tabindex="-1">\u5347\u7EA7\u5E38\u7528\u5DE5\u5177 <a class="header-anchor" href="#\u5347\u7EA7\u5E38\u7528\u5DE5\u5177" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo yum install -y yum-utils net-tools net-snmp wget iftop htop telnet tree git vim zip unzip curl ntpdate mlocate</span></span>
<span class="line"></span></code></pre></div><h2 id="\u4FEE\u6539\u65F6\u533A-\u8BBE\u7F6E\u65F6\u95F4" tabindex="-1">\u4FEE\u6539\u65F6\u533A&amp;&amp;\u8BBE\u7F6E\u65F6\u95F4 <a class="header-anchor" href="#\u4FEE\u6539\u65F6\u533A-\u8BBE\u7F6E\u65F6\u95F4" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sudo timedatectl set-timezone Asia/Shanghai</span></span>
<span class="line"><span style="color:#A6ACCD;">sudo ntpdate cn.pool.ntp.org</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">00 */10 * * * ntpdate cn.pool.ntp.org &gt;/dev/null 2&gt;&amp;1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /var/spool/cron/root </span><span style="color:#676E95;font-style:italic;"># \u6BCF\u5929\u65E9\u4E0A10\u5B9A\u65F6\u6821\u5BF9\u65F6\u95F4</span></span>
<span class="line"></span></code></pre></div><h2 id="\u5185\u6838\u4F18\u5316" tabindex="-1">\u5185\u6838\u4F18\u5316 <a class="header-anchor" href="#\u5185\u6838\u4F18\u5316" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">net.ipv4.ip_local_port_range = 1024 65535</span></span>
<span class="line"><span style="color:#C3E88D;">net.core.rmem_max = 16777216</span></span>
<span class="line"><span style="color:#C3E88D;">net.core.wmem_max = 16777216</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_rmem = 4096 87380 16777216</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_wmem = 4096 65536 16777216</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_fin_timeout = 10</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_tw_recycle = 1</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_timestamps = 0</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_window_scaling = 0</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_sack = 0</span></span>
<span class="line"><span style="color:#C3E88D;">net.core.netdev_max_backlog = 65535</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_no_metrics_save = 1</span></span>
<span class="line"><span style="color:#C3E88D;">net.core.somaxconn = 65535</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_syncookies = 0</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_max_orphans = 262144</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_max_syn_backlog = 262144</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_synack_retries = 2</span></span>
<span class="line"><span style="color:#C3E88D;">net.ipv4.tcp_syn_retries = 2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">/etc/sysctl.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">sysctl -w net.ipv4.route.flush=1</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ulimit -HSn 65536</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /etc/rc.local</span></span>
<span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ulimit -HSn 65536</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /root/.bash_profile</span></span>
<span class="line"><span style="color:#82AAFF;">ulimit</span><span style="color:#A6ACCD;"> -HSn 65535</span></span>
<span class="line"></span></code></pre></div><h2 id="\u65B0\u589E\u7528\u6237" tabindex="-1">\u65B0\u589E\u7528\u6237 <a class="header-anchor" href="#\u65B0\u589E\u7528\u6237" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">adduser curder </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">curder-111222</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> passwd --stdin </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">curder</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">gpasswd -a curder wheel</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u8FD9\u91CC\u5047\u5982\u65B0\u589E\u4E00\u4E2A\u7528\u6237\u540D\u4E3A <code>curder</code>\uFF0C\u5BC6\u7801\u4E3A\uFF1A<code>curder-111222</code>\uFF0C\u5E76\u5C06\u5176\u8BBE\u7F6E\u4E3A\u53EF\u4EE5\u901A\u8FC7<code>sudo su -</code>\u5207\u6362\u4E3Aroot\u7528\u6237\u3002</p></blockquote><h2 id="\u7981\u6B62root\u7528\u6237\u767B\u5F55" tabindex="-1">\u7981\u6B62root\u7528\u6237\u767B\u5F55 <a class="header-anchor" href="#\u7981\u6B62root\u7528\u6237\u767B\u5F55" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#A6ACCD;">sed -i </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/PermitRootLogin yes/PermitRootLogin no/g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> /etc/ssh/sshd_config </span><span style="color:#676E95;font-style:italic;"># \u7981\u7528\u670D\u52A1\u5668root\u8FDC\u7A0B\u767B\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">sed -i </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">s/PasswordAuthentication no/PasswordAuthentication yes/g</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> /etc/ssh/sshd_config </span><span style="color:#676E95;font-style:italic;"># \u5141\u8BB8\u4F7F\u7528\u6B63\u786E\u7684\u7528\u6237\u5BC6\u7801\u767B\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">systemctl reload sshd</span></span>
<span class="line"></span></code></pre></div><h2 id="\u7EC8\u7AEF\u914D\u7F6E" tabindex="-1">\u7EC8\u7AEF\u914D\u7F6E <a class="header-anchor" href="#\u7EC8\u7AEF\u914D\u7F6E" aria-hidden="true">#</a></h2><div class="language-bash"><span class="copy"></span><pre><code><span class="line"><span style="color:#82AAFF;">echo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"># \u7EC8\u7AEF\u914D\u8272</span></span>
<span class="line"><span style="color:#C3E88D;">export PS1=&#39;\\n\\[\\e[37;1m[\\]\\[\\e[31;1m\\]\\u\\[\\e[39;1m\\]@\\[\\e[33;1m\\]\\H \\[\\e[34;1m\\]\\w\\[\\e[37;1m\\]]\\n\\[\\e[32;1m\\]</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">$ \\[\\e[0m\\]&#39;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;&gt;</span><span style="color:#A6ACCD;"> /etc/bashrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">source</span><span style="color:#A6ACCD;"> /etc/bashrc</span></span>
<span class="line"></span></code></pre></div>`,20),o=[p];function t(c,r,i,d,y,D){return n(),a("div",null,o)}var h=s(l,[["render",t]]);export{A as __pageData,h as default};
